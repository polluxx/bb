
<link rel="import" href="../bower_components/polymer/polymer.html">

<link href="../bower_components/core-icons/core-icons.html" rel="import">
<link href="../bower_components/paper-fab/paper-fab.html" rel="import">
<link href="../bower_components/paper-input/paper-input-decorator.html" rel="import">
<link href="../bower_components/paper-shadow/paper-shadow.html" rel="import">

<link rel="import" href="app-globals.html">
<link rel="import" href="app-layer.html">
<link rel="import" href="action-block.html">

<polymer-element name="action-bar" extends="app-layer">
	<template>
		<app-globals id="globals"></app-globals>
		<div class="col col-lg-4 admin-block passive">
            <paper-shadow z="4">
                <paper-fab hidden?="{{searched != false}}" on-click="{{tapped}}" icon="{{operation}}" class="green" title="search"></paper-fab>
            </paper-shadow>
            <paper-shadow z="4">
            <div hidden?="{{searched == false}}" vertical layout style="height:100vh">
				<div class="action-bar">
                    <paper-input-decorator label="пошук" floatingLabel>
                      <input id="searchLine" is="core-input">
                    </paper-input-decorator>

                    <action-block></action-block>
				</div>


			</div>
            </paper-shadow>
		</div>
		
		<style>
		
		:host {
			position: absolute;
			top:0px;
			right:0px;
		}
		
		:host paper-fab {
			position: fixed;
			right: 60px;
			top:70px;
		}
		
		:host .action-bar {
			padding:20px 30px;
			background: #fff;
			height: 100%;
		}

        :host .admin-block {
            width:100%;
        }

		.green {
			background:#39C32F;
		}
		</style>
	</template>
	<script>
	Polymer({
		ready: function() {
			this.settings = this.$.globals.settings;
			this.searched = this.$.globals.searched;
			console.info(this.settings)
			this.operation = "search";
			if (this.settings.isAdmin) {
				this.operation = "create";
			}
			
			self = this;
			window.addEventListener("keypress", function(e) {
				//e.preventDefault();
				if (!self.$.globals.searched) {
					self.tapped();
				}
				
				self.$.searchLine.focus();
				if (self.$.searchLine.value.length == 0) {
					self.$.searchLine.value = String.fromCharCode(e.keyCode);
				}
				
			})
		},
		tapped: function() {
			this.searched = true;
		}
    });
	</script>

</polymer-element>
